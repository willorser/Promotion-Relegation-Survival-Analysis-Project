"0","Team = c()"
"0","Time = c()"
"0","Status = c()"
"0","SpellNumber = c()"
"0","NewlyPromoted = c()"
"0",""
"0","position = data.frame(matrix(nrow=480,ncol=20))"
"0","colnames(position)=c(""year1"",""year2"",""year3"",""year4"",""year5"",""year6"",""year7"",""year8"",""year9"",""year10"",""year11"",""year12"",""year13"",""year14"",""year15"",""year16"",""year17"",""year18"",""year19"",""year20"")"
"0",""
"0","#Promoted20072008 = c(""Derby County"",""Birmingham City"",""Sunderland"")"
"0",""
"0","Promoted20002001 = c(""Charlton Athletic"",""Manchester City"",""Ipswich Town"")"
"0",""
"0","j = 1"
"0",""
"0","for( k in 1:nrow(SeasonFinish2) ) {"
"0",""
"0","v = as.numeric(SeasonFinish2[k,2:ncol(SeasonFinish2)])"
"0","i=1"
"0","temp=0"
"0","spell=1"
"0","while(i < length(v)+1 ) {"
"0","  while( !is.na(v[i]) ) {temp=temp+1; position[j,temp]=v[i] ; i=i+1} ;"
"0","Team[j]=as.character(SeasonFinish2[k,1]) ; Time[j]=temp ; Status[j]=ifelse(i==length(v)+1&v[length(v)]<18,0,1) ; SpellNumber[j]=spell ; NewlyPromoted[j]=ifelse(spell==1&!is.na(v[1])& !(SeasonFinish2[k,1] %in% Promoted20002001),0,1) ; i=i+1 ; j=j+1 ; if(temp>0) {spell=spell+1} ; temp=0"
"0","}"
"0","}"
"0",""
"0","data = data.frame( cbind(Team,Time,Status,SpellNumber,NewlyPromoted,position) )"
"0","#data = data.frame( cbind(Team,Time,Status,SpellNumber,NewlyPromoted) )"
"0",""
"0","data = data %>% filter( Time > 0 )"
"0",""
"0","View(data)"
